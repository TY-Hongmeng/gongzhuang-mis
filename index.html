<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <link rel="icon" type="image/svg+xml" href="./favicon.svg" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>My Trae Project</title>
    <script>
      (function(){
        try {
          if (!location.hash) {
            location.hash = '/login'
          }
        } catch(e) {}

        try {
          var ls = window.localStorage
          var max = 900000
          var v = ls.getItem('process_routes_map')
          if (v && v.length > max) {
            ls.removeItem('process_routes_map')
          }
          try {
            ls.setItem('__ls_test', '1')
            ls.removeItem('__ls_test')
          } catch (e2) {
            ;['process_routes_map','process_done_map','temporary_plans','temporary_hidden_ids'].forEach(function(k){
              try { ls.removeItem(k) } catch(e3) {}
            })
          }
        } catch(e4) {}
      })();
    </script>
    <script type="module">
      // 仅在开发环境执行一次性遮罩清理与 SW 注销（无自动重载/重连）
      if (import.meta.env?.DEV) {
        try {
          const nodes = document.querySelectorAll('vite-error-overlay, #vite-error-overlay, .vite-error-overlay');
          nodes.forEach((el) => el.remove());
        } catch {}

        if ('serviceWorker' in navigator) {
          navigator.serviceWorker.getRegistrations?.().then(regs => {
            regs.forEach(r => r.unregister());
          }).catch(() => {});
          
          caches.keys().then(names => {
            Promise.all(names.map(n => caches.delete(n)));
          }).catch(() => {});
        }
      }
    </script>
  </head>
  <body>
    <div id="root"></div>
    <script type="module" src="./src/main.tsx"></script>
  </body>
</html>
